{% extends "base.html" %}
{% block content %}
<div class="container">
    <div class="logout">
        <a href="{{ url_for('logout') }}" class="button">Logout</a>
    </div>
    <h1>Welcome, {{ current_user.username }}!</h1>
    <p><a href="{{ url_for('profile') }}" class="button" style="margin-top:0;">Back to Profile</a></p>

    <h2>Your Folders</h2>
    {% if folders %}
    <ul class="folder-list">
        {% for folder in folders %}
        <li class="folder-item">
            <a class="folder-link" href="{{ url_for('view_folder', folder_id=folder.id) }}">
                {{ folder.name }} ({{ folder.templates|length }} templates)
            </a>
        </li>
        {% endfor %}
    </ul>
    {% else %}
    <p>You have no folders yet.</p>
    {% endif %}
    <form class="add-folder-form" method="POST" action="{{ url_for('create_folder') }}">
        <input type="text" name="name" placeholder="New folder name" required>
        <button type="submit">Add Folder</button>
    </form>

    <h2>Recent Workouts</h2>
    {% if recent_workouts %}
    <ul class="workout-list">
        {% for workout in recent_workouts %}
        <li class="workout-item">
            <strong>{{ workout.name or (workout.template.name if workout.template else 'Workout') }}</strong><br>
            <small>{{ workout.date.strftime('%B %d, %Y at %I:%M %p') }}</small><br>
            <a href="{{ url_for('view_workout', workout_id=workout.id) }}" class="button" style="margin-top:10px;">View</a>
        </li>
        {% endfor %}
    </ul>
    {% else %}
    <p>No recent workouts found.</p>
    {% endif %}
</div>
{% endblock %}
