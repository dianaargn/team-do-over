{% extends "base.html" %}
{% block content %}
<div class="container">
    <div class="logout">
        <a href="{{ url_for('logout') }}" class="button">Logout</a>
    </div>

    <h1>{{ workout.name or "Workout" }}</h1>
    <p><strong>Date:</strong> {{ workout.date.strftime('%B %d, %Y at %I:%M %p') }}</p>
    {% if workout.completed %}
    <p style="color: green; font-weight: bold;">This workout is completed.</p>
    {% else %}
    <p style="color: orange; font-weight: bold;">This workout is in progress.</p>
    {% endif %}

    <h2>Sets</h2>
    {% if workout.sets %}
    <ul class="set-list">
        {% for s in workout.sets %}
        <li class="set-item">
            <strong>Exercise:</strong> {{ s.exercise.name }}<br>
            <form action="{{ url_for('update_set', workout_id=workout.id, set_id=s.id) }}" method="post">
                <label for="weight_{{ s.id }}">Weight (lbs/kg):</label>
                <input type="text" name="weight" id="weight_{{ s.id }}" value="{{ s.weight if s.weight is not none else '' }}">

                <label for="reps_{{ s.id }}">Reps:</label>
                <input type="number" name="reps" id="reps_{{ s.id }}" value="{{ s.reps if s.reps else '' }}">

                <label for="rpe_{{ s.id }}">RPE (1-10):</label>
                <input type="number" name="rpe" step="0.5" min="1" max="10" id="rpe_{{ s.id }}" value="{{ s.rpe if s.rpe else '' }}">

                <label for="rir_{{ s.id }}">RIR (0-9):</label>
                <input type="number" name="rir" min="0" max="9" id="rir_{{ s.id }}" value="{{ s.rir if s.rir else '' }}">

                <button type="submit">Update Set</button>
            </form>
            {% if s.completed %}
            <p style="color:green;">Set completed!</p>
            {% endif %}
        </li>
        {% endfor %}
    </ul>
    {% else %}
    <p>No sets found for this workout.</p>
    {% endif %}

    {% if not workout.completed %}
    <form action="{{ url_for('finish_workout', workout_id=workout.id) }}" method="post" style="margin-top:20px;">
        <button type="submit">Finish Workout</button>
    </form>
    {% endif %}
</div>
{% endblock %}
